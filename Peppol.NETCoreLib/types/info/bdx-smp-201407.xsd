<?xml version="1.0" encoding="UTF-8"?>
<!--
    Service Metadata Publishing (SMP) Version 1.0
    Committee Specification 02
    03 February 2016
    Copyright (c) OASIS Open 2016. All Rights Reserved.
    Source: http://docs.oasis-open.org/bdxr/bdx-smp/v1.0/cs02/schemas/
    Latest version of narrative specification: http://docs.oasis-open.org/bdxr/bdx-smp/v1.0/bdx-smp-v1.0.html
     
-->
    <xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified"
    targetNamespace="http://docs.oasis-open.org/bdxr/ns/SMP/2014/07"
    xmlns="http://docs.oasis-open.org/bdxr/ns/SMP/2014/07" id="ServiceMetadataPublishing"
    xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <xs:import namespace="http://www.w3.org/2000/09/xmldsig#"
        schemaLocation="http://www.w3.org/TR/xmldsig-core/xmldsig-core-schema.xsd"/>
    <xs:import
        namespace="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd"/>
    <xs:element name="ServiceGroup" type="ServiceGroupType"/>
    <xs:element name="ServiceMetadata" type="ServiceMetadataType"/>
    <xs:element name="SignedServiceMetadata" type="SignedServiceMetadataType"/>
    <xs:complexType name="SignedServiceMetadataType">
        <xs:sequence>
            <xs:element ref="ServiceMetadata"/>
            <xs:element ref="ds:Signature"/>
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="ServiceMetadataType">
        <xs:choice>
            <xs:element name="ServiceInformation" type="ServiceInformationType"/>
            <xs:element name="Redirect" type="RedirectType"/>
        </xs:choice>
    </xs:complexType>
    <xs:complexType name="ServiceInformationType">
        <xs:sequence>
            <xs:element ref="ParticipantIdentifier"/>
            <xs:element ref="DocumentIdentifier"/>
            <xs:element name="ProcessList" type="ProcessListType"/>
            <xs:element name="Extension" type="ExtensionType" minOccurs="0"/>
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="ProcessListType">
        <xs:sequence>
            <xs:element name="Process" type="ProcessType" maxOccurs="unbounded"/>
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="ProcessType">
        <xs:sequence>
            <xs:element ref="ProcessIdentifier"/>
            <xs:element name="ServiceEndpointList" type="ServiceEndpointList"/>
            <xs:element name="Extension" type="ExtensionType" minOccurs="0"/>
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="ServiceEndpointList">
        <xs:sequence>
            <xs:element name="Endpoint" type="EndpointType" maxOccurs="unbounded"/>
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="EndpointType">
        <xs:sequence>
            <xs:element name="EndpointURI" type="xs:anyURI"/>
            <xs:element name="RequireBusinessLevelSignature" type="xs:boolean"/>
            <xs:element name="MinimumAuthenticationLevel" type="xs:string" minOccurs="0"/>
            <xs:element name="ServiceActivationDate" type="xs:dateTime" minOccurs="0"/>
            <xs:element name="ServiceExpirationDate" type="xs:dateTime" minOccurs="0"/>
            <xs:element name="Certificate" type="xs:base64Binary"/>
            <xs:element name="ServiceDescription" type="xs:string"/>
            <xs:element name="TechnicalContactUrl" type="xs:anyURI"/>
            <xs:element name="TechnicalInformationUrl" type="xs:anyURI" minOccurs="0"/>
            <xs:element name="Extension" type="ExtensionType" minOccurs="0"/>
        </xs:sequence>
        <xs:attribute name="transportProfile" type="xs:string" use="required"/>
    </xs:complexType>
    <xs:complexType name="ServiceGroupType">
        <xs:sequence>
            <xs:element ref="ParticipantIdentifier"/>
            <xs:element name="ServiceMetadataReferenceCollection"
                type="ServiceMetadataReferenceCollectionType"/>
            <xs:element name="Extension" type="ExtensionType" minOccurs="0"/>
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="ServiceMetadataReferenceCollectionType">
        <xs:sequence>
            <xs:element name="ServiceMetadataReference" type="ServiceMetadataReferenceType"
                minOccurs="0" maxOccurs="unbounded"/>
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="ServiceMetadataReferenceType">
        <xs:attribute name="href" type="xs:anyURI"/>
    </xs:complexType>
    <xs:complexType name="RedirectType">
        <xs:sequence>
            <xs:element name="CertificateUID" type="xs:string"/>
            <xs:element name="Extension" type="ExtensionType" minOccurs="0"/>
        </xs:sequence>
        <xs:attribute name="href" type="xs:anyURI" use="required"/>
    </xs:complexType>
    <xs:complexType name="ExtensionType">
        <xs:sequence>
            <xs:any/>
        </xs:sequence>
    </xs:complexType>
    <xs:element name="ParticipantIdentifier" type="ParticipantIdentifierType"/>
    <xs:element name="DocumentIdentifier" type="DocumentIdentifierType"/>
    <xs:element name="ProcessIdentifier" type="ProcessIdentifierType"/>
    <xs:element name="RecipientIdentifier" type="ParticipantIdentifierType"/>
    <xs:element name="SenderIdentifier" type="ParticipantIdentifierType"/>
    <xs:complexType name="ParticipantIdentifierType">
        <xs:simpleContent>
            <xs:extension base="xs:string">
                <xs:attribute name="scheme" type="xs:string"/>
            </xs:extension>
        </xs:simpleContent>
    </xs:complexType>
    <xs:complexType name="DocumentIdentifierType">
        <xs:simpleContent>
            <xs:extension base="xs:string">
                <xs:attribute name="scheme" type="xs:string"/>
            </xs:extension>
        </xs:simpleContent>
    </xs:complexType>
    <xs:complexType name="ProcessIdentifierType">
        <xs:simpleContent>
            <xs:extension base="xs:string">
                <xs:attribute name="scheme" type="xs:string"/>
            </xs:extension>
        </xs:simpleContent>
    </xs:complexType>

</xs:schema>
